<!DOCTYPE html>
<html lang="en">
  <head>
    <style>
      .CodeMirror-foldmarker {    
      font-family: arial;
      }
      .CodeMirror-foldgutter {
      width: .7em;
      }
      .CodeMirror-foldgutter-open,
      .CodeMirror-foldgutter-folded {
      color: #555;
      cursor: pointer;
      }
      .CodeMirror-foldgutter-open:after {
      content: "\25BE";
      }
      .CodeMirror-foldgutter-folded:after {
      content: "\25B8";
      }
    </style>

    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->
    <meta name="description" content="The K Language portal.">
    <meta name="author" content="">

    <title>The K Language</title>
  </head>

  <body>

    <nav class="navbar navbar-inverse navbar-fixed-top">
      <div class="container">
        <div class="navbar-header">
          <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
          <a class="navbar-brand" href="#">K</a>
        </div>
	
	<div id="navbar" class="navbar-collapse collapse">
          <ul class="nav navbar-nav">
            <li><a href="index.html">Home</a></li>
            <li class="active"><a href="tutorial.html">Tutorial</a></li>
            <li class="dropdown">
              <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">Examples<span class="caret"></span></a>
              <ul class="dropdown-menu">
                <li><a href="#" onclick="loadExample(editor,'examples/Shapes.k')">Shapes.k</a></li>
                <li><a href="#" onclick="loadExample(editor,'examples/sm.k')">sm.k</a></li>
                <li><a href="#" onclick="loadExample(editor,'examples/borges.k')">borges.k</a></li>
		<li><a href="#" onclick="loadExample(editor,'examples/prepost.k')">prepost.k</a></li>
		<li><a href="#" onclick="loadExample(editor,'examples/Fruits.k')">Fruits.k</a></li>
		<li><a href="#" onclick="loadExample(editor,'examples/lightswitch.k')">lightswitch.k</a></li>
		<li><a href="#" onclick="loadExample(editor,'examples/scheduling.k')">scheduling.k</a></li>
		<li><a href="#" onclick="loadExample(editor,'examples/planning-simple.k')">planning-simple.k</a></li>
                <li role="separator" class="divider"></li>
                <li><a href="#" onclick="loadExample(editor,'examples/GravityScience.k')">GravityScience.k</a></li>
                <li><a href="#" onclick="loadExample(editor,'examples/DSN_Pass.k')">DSN_Pass.k</a></li>
                <!--<li role="separator" class="divider"></li>
                    <li class="dropdown-header">Nav header</li>
                <li><a href="#">Separated link</a></li>
                <li><a href="#">One more separated link</a></li>-->
                  </ul>
                </li>
              </ul>
            </div>
      </div>
    </nav>

    <!-- Main jumbotron for a primary marketing message or call to action -->
    <div class="jumbotron">
    </div>
    
    <div class="container">
      <!-- Example row of columns -->
      <div class="row">
	<div class="col-md-6" style="padding-right:20px; border-right: 2px solid #ccc; overflow:scroll; height:720px;">
 	  <h3>Introduction </h3>
	  <p>
	    Welcome to <font color=red>K</font>. K is a textual language intended to be used
	    by modelers and/or programmers, for system design and implementation. 
            The motivation for K is based on the need for a textual language that 
            provides the right set of constructs and tools to model, verify, and
	    implement. Currently K is integrated with SMT solvers to
	    be able to:
	    <ul>
	      <li> Prove that classes with given constraints are
	      satisfiable. If your constraints are specified at the
	      top level without any classes, that is fine as well. The
	      constraints will be proven satisfiable at the top level.
	      <li> For each satisfiable class, provide an example of
	      an instance with satisfying assignments to the
	      properties. Note, this is not the only possible solution
	      to the class, rather one of the potentially many
	      solutions. If no solution is possible (i.e. the class is
	      NOT satisfiable), then K will provide you a
	      corresponding report.
	    </ul>

	    In order to use K, one only has to write K code in the
	    editor and then submit it for analysis using the 'Analyze'
	    button. If there are errors in the code, they will be
	    reported in the results window, otherwise the result of
	    the consistency checking and instance generation will be
	    reported in a systematic manner.

	    For a binary drop for your development environment or any
	    other questions/concerns please contact
	    <a href="mailto:rahulku@jpl.nasa.gov">Rahul.Kumar@jpl.nasa.gov</a>
	    or <a href="mailto:klaus.havelund@jpl.nasa.gov">Klaus.Havelund@jpl.nasa.gov</a>.
	  </p>

	  <h3>Primitive Types</h3> 

	  K currently has the following primitive types: Int, Real,
	  Char, String, Bool. <!-- In addition to the primitive types, K
	  also provides the Unit literal '()'. Unit can be used to
	  represent the existence of something without it having any
	  particular value. -->
	  
	  <h3>Classes</h3>
	  <p>
	  Classes are a basic method of encapsulating all relevant
	  information, properties, functions etc. about a single
	  entity. They provide the simplest approach for abstracting a
	  concept or concrete entity and representing it in your
	  model/program. The follwing figure shows an example of
	  classes being used to model shapes. We will use this figure
	  to dicuss some basic concepts of K in the tutorial.
	  </p>

	  <p style="border: 1px solid #ccc;">	   
	    <a class="btn-xs btn-default" href="#" role="button" onclick="loadExample(editor,'examples/ShapesTutorial.k');">Load in editor</a>
	    <textarea id="in1" name="in1"></textarea>
	  </p>

	  <h4>Properties</h4>
	  <p>
	    Properties are attributes that you want associated with a
	    particular concept. For example, each Shape always has a
	    certain number of sides associated with it. Therefore,
	    sides is a property of class Shape. This declaration can
	    be found on line 4 of the Shapes example. It should be
	    noted that properties can be declared inside classes, or
	    at the outer most level.
	  </p>
	  
	  <h5>Modifiers</h5>
	  <p>
	    Each property may also have certain modifiers present
	    before it's name. These are to specify additional
	    behaviors. Certain of these modifiers can also be combined
	    together.

	      <table class="table table-bordered">
		<tbody>
		  <thead>
		    <tr>
		      <th>Modifier</th>
		      <th>Description</th>
		    </tr>
		  <tr>
		    <td>val</td>
		    <td>read only property</td>
		  </tr>
		  <tr>
		    <td>var</td>
		    <td>read and write property</td>
		  </tr>
		  <tr>
		    <td>ordered (collection)</td>
		    <td>property is dictated by a certain ordering</td>
		  </tr>
		  <tr>
		    <td>unique (collection)</td>
		    <td>no duplicate members in this property</td>
		  </tr>
		  <tr>
		    <td>part</td>
		    <td>property is a part of another object</td>
		  </tr>
		  <tr>
		    <td>source</td>
		    <td>source property of an association</td>
		  </tr>
		  <tr>
		    <td>target</td>
		    <td>target property of an association</td>
		  </tr>
		</tbody>
              </table>

	      The following code snippet shows various properties
	      declared with modifiers present in them. 'MY_CONSTANT'
	      is a variable that is read only, whereas the 'y' Real is
	      read and write (can be modified). Leaving out the 'var'/'val'
              modifier is equivalent to providing the 'val' modifier. 
              'ages' is a bag of Integers, and is ordered (a list essentially).
              Here the multiplicity '[*]' stands for '0 or more'. 
              'cars' is a set of Cars. Finally 'transactions'
              is an ordered set.
	  </p>
	  <p style="border: 1px solid #ccc;">	   
	    <textarea id="in2" name="in2">
val MY_CONSTANT : Int
var y : Real
ordered ages : Int [*]
unique cars : Car [*]
ordered unique transactions : Transaction [*]
</textarea>	      
	    </p>

	  <h4>Constraints</h4>
	  <p>
	    Constraints, or requirements can be imposed on classes (or
	    at the outer most level). These are used to restrict the
	    values of properties. Constraints always evaluate to a
	    Boolean value - true or false. For example, in the Angle
	    class, on line 15, we restrict the value of the angle to
	    be between 0 and 360 degrees. Now every instance of the
	    Angle class will have the angle value between 0 and 360
	    degrees.
	  </p>

<!--
	  <h4>Functions</h4>
	  <p>Functions can be used to express a method for computing a
	  particular value. For example, each Shape has an associate
	  area that can be calculated in some particular manner -
	  usually specific to the shape. For this reason, we declare
	  that each shape has a function 'area' that returns the
	  corresponding area of the shape. This function is declare on
	  line 5 of the Shapes example. Functions can also be declared
	  at the outer most level, at a global scope. Line 11 declares
	  a function in class Angle that is used to compare the
	  current angle to the 'other' angle that is given the
	  function. Functions are capable of taking parameters of any
	  type and any count and return a value of the computation. </p>
-->
	  <h4>Inheritance</h4>
	  <p>
	    K supports inheritance (multiple as well as single) between
	    classes. Inheritance works in a manner similar to other
	    languages such as Java, with the one difference that in K,
	    sub-classes not only inherit the properties and
	    functions of the parent class(es) but also the
	    constraints. For example, class TAngle inherits from class
	    Angle. As a result, it already has a function 'eq' and the
	    property 'value' from class Angle. Additionally, it also
	    has the requirement that the value is to be between 0 and
	    360. The TAngle class further restricts the value of the
	    angle to be less than 180 degrees, which is fine since
	    this is not conflicting with the parent class
	    constraints. Whenever constraints are inherited, and added
	    upon by sub-classes, class consistency may be
	    compromised.
	  </p>

	  <h4>Class Types</h4>
	  <p> It should be noted that each declared class also becomes
	  a 'type' in K's world. For example, class Angle creates a
	  new type, that can be used as the type for properties or
	  function parameters. Lines 24 and 25 use the TAngle type as
	  the type for properties 'a' and 'b'. 
	  </p>

	  <h3>Packages and Imports</h3>
	  <p>
	    Optionally, you may include a package declaration such as
	    the declaration on line 1 of the shapes example. This
	    declaration specifies the package that this file belongs
	    to. This is useful when you want to be able to import it
	    in other K models using the 'import package.xyz'
	    declaration. Currently our language supports this and we
	    are working out the finer details of building tool support
	    for this. It should be available very soon.
	  </p>

	  <h3>Type Checker</h3>
	  <p>The K type checker will statically perform analysis and
	  type checking on your code to ensure that certain basic
	  conditions are met before any other analysis can be
	  performed. These include syntactic and certain semantic
	  checks. Please note that error messaging is being improved
	  even as you read this.</p>

	</div>
	<div class="col-md-6">
	    <p>
	      <textarea id="code" name="code"></textarea>
	    </p>
	      <hr>
	    <p>
  	      <div class="pull-right">   <canvas width="27" height="27" id="myCanvas"></canvas> </div>
	      <a class="btn btn-warning center-block" href="#" role="button" onclick="doWork()">Analyze</a>
	    </p>
	      <hr>
	    <p>
	      <textarea id="result" name="result"></textarea>
	    </p>
	</div>
	
	<hr>
	
	<footer>
	  <p>
	    &copy; 2015 by the California
	    Institute of Technology. ALL RIGHTS RESERVED. United States Government
	    Sponsorship acknowledged. Any commercial use must be negotiated with
	    the Office of Technology Transfer at the California Institute of
	    Technology.
	  </p>
	</footer>
      </div> <!-- /container -->
      

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>

    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap.min.css">
    
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap-theme.min.css">
    
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/js/bootstrap.min.js"></script>

    <link rel="stylesheet" href="CodeMirror-master/lib/codemirror.css">
    <link rel="stylesheet" href="CodeMirror-master/theme/ttcn.css">
    <link rel="stylesheet" href="CodeMirror-master/theme/paraiso-light.css">
    <link rel="stylesheet" href="CodeMirror-master/theme/neat.css">
    <script src="CodeMirror-master/lib/codemirror.js"></script>
    <script src="CodeMirror-master/mode/shell/shell.js"></script>
    <script src="CodeMirror-master/addon/edit/matchbrackets.js"></script>
    <script src="CodeMirror-master/mode/k/clike.js"></script>
    <script src="CodeMirror-master/addon/fold/foldcode.js"></script>
    <script src="CodeMirror-master/addon/fold/foldgutter.js"></script>
    <script src="CodeMirror-master/addon/fold/brace-fold.js"></script>
    <script src="CodeMirror-master/addon/fold/xml-fold.js"></script>
    <script src="CodeMirror-master/addon/fold/comment-fold.js"></script>

    <link rel="stylesheet" href="CodeMirror-master/addon/dialog/dialog.css">
    <link rel="stylesheet" href="CodeMirror-master/addon/search/matchesonscrollbar.css">
    <script src="CodeMirror-master/addon/dialog/dialog.js"></script>
    <script src="CodeMirror-master/addon/search/searchcursor.js"></script>
    <script src="CodeMirror-master/addon/search/search.js"></script>
    <script src="CodeMirror-master/addon/scroll/annotatescrollbar.js"></script>
    <script src="CodeMirror-master/addon/search/matchesonscrollbar.js"></script>

    <script>
      var editor = CodeMirror.fromTextArea(document.getElementById("code"), {
      lineNumbers: true,
      matchBrackets: true,
      theme: "ttcn",
      mode: "text/x-k",
      foldGutter: {
      rangeFinder: new CodeMirror.fold.combine(CodeMirror.fold.brace, CodeMirror.fold.comment)
      },
      extraKeys: {"Ctrl-Q": function(cm){ cm.foldCode(cm.getCursor()); }},
      gutters: ["CodeMirror-linenumbers", "CodeMirror-foldgutter"]
      });

      var in1 = CodeMirror.fromTextArea(document.getElementById("in1"), {
      lineNumbers: true,
      theme: "neat",
      mode: "text/x-k",
      readOnly: true,
      foldGutter: {
      rangeFinder: new CodeMirror.fold.combine(CodeMirror.fold.brace, CodeMirror.fold.comment)
      },
      extraKeys: {"Ctrl-Q": function(cm){ cm.foldCode(cm.getCursor()); }},
      gutters: ["CodeMirror-linenumbers", "CodeMirror-foldgutter"]
      });
      var in2 = CodeMirror.fromTextArea(document.getElementById("in2"), {
      lineNumbers: true,
      theme: "neat",
      mode: "text/x-k",
      readOnly: true
      });
/*      var in3 = CodeMirror.fromTextArea(document.getElementById("in3"), {
      lineNumbers: true,
      theme: "neat",
      mode: "text/x-k",
      readOnly: true
      });
      var in4 = CodeMirror.fromTextArea(document.getElementById("in4"), {
      lineNumbers: true,
      theme: "neat",
      mode: "text/x-k",
      readOnly: true
      });
      in3.setSize(null,"100");
      in4.setSize(null,"100");

*/
      in1.setSize(null,"300");
      in2.setSize(null,"110");
  
      var results = CodeMirror.fromTextArea(document.getElementById("result"), {
      lineNumbers: false,
      theme: "paraiso-light",
      mode: "shell",
      readOnly: true
      });

      editor.setValue("");
      editor.setSize(null,"300");

      results.setSize(null,"300");
      results.setValue("Results will be displayed here.");
      results.readOnly = true;

      function loadExample(e,name){
      results.setValue('');
      $.ajax({
       url: "http://niks.jpl.nasa.gov/K/k/" + name,
      success: function(data, status, xhr) {
      e.setValue(data);
      },
      error: function(data, status, xhr) {
      alert("Error when loading example. Please try again.");
      }
      });
      return false;
      }

      $('canvas').hide();
      
      var working = 0;
      function doWork() {
      if(working == 1) return;
      working = 1;
      $('canvas').show();
      results.setValue('');
      $.ajax({
      type: "post",
      data: editor.getValue(),
      url: "http://niks.jpl.nasa.gov/k-service",
      success: function(data, status, xhr) {
      results.setValue(data);
      working = 0;
      $('canvas').hide();
      },
      error: function(data, status, xhr) {
      $('canvas').hide();
      alert("Error while executing. Please try again.");
      working = 0;
      }
      });
      return false;
      }
      
      editor.setValue("-- Load sample code from the tutorial by scrolling down, or \n-- from the examples drop down list provided \n--  in the navigation bar.");

      loadExample(in1, "examples/ShapesTutorial.k");
      loadExample(in3, "tests/inheritance3.k");
      loadExample(in4, "tests/inheritance4.k");


    </script>
        <script type="text/javascript">
            var cog = new Image();
            function init() {
                cog.src = 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABsAAAAbCAYAAACN1PRVAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAABK1JREFUeNqMVt1ZGzkUvVfS4IW1l8GO82w6IBXE7mCpAFMB+Pt4Z6iApALcAe4AU0HoAJfg7BPYHinnXmmciX+y0YdmJHnQ0bk/R5cvh5cUyFPwRD4EChgEvGWMB36R3+JaiTkmD5gOs8yNb25uLlerFf1pM2yIGA82TEY7xow1oj4GBU6S6yywPNG4JwDH+XGv0Whs7ndN8n97mmPsLCSYgy7ImPQE/pFDyAF+7L0fgTNFUDBcLal90taD1doQ/T6NT9DnW8zkT+jJuQVYukG3hifCVk/L3JOxMBa8VVlSp9MhHKLaB+zpNo1fdgEpmByuMqUAV5viOQLwXNax9KBAFNEEpN1pUwnQmvl6aTza6zNjrCKaymeyOdYAMgfg18iG4T/qw+AC94zvpzDjcwqOXo3VGH26H0xMZ7jPxgT0R2zUi4BYt6bAfEbJvJFZKA4ODgZ5nhcJLE9mk35X21vWC/TXKmiwr2xszoQd/PQv3t/QCzY2twpqBpb5FKOp+hCgzWaTWq0W1Xx0ij5An9WC5VtiLMwvNBrVaSGMvQk5jHQVPN7sb0HzAtE+QJrNgrcUNEARieWCut0ugR0tl8sKcJ5Ahc3jRviPK8ZGTaaBwGKyT+gTiwM4a3Jrba6MbeVXo5F4kp9shn29ndUYC9vLirGDXzRhrYhD8DME5Hkg22df5rDYS/RXmVIsaP/Q/SXs600YnifTjbeSWliEdTYb3QyTqYfdDKTL4B1KS6tVqf6SgGq3P9BvZGpvNIrPCgVKZlGlCDQDxJiCjVppCab05DJHzb+b1Gm36X80cVjLuzozexs0f6IgRkA5XRhzIixRL1+IzhwdHVHrn1Y9oXe1i10aKT6bGGhg1CKK+cT0zCGCs0oXTIogybJMw/779//o48duMvnO9rzLn+Kz8wgS5Shqo4njpCoOQA5Ajb8adHh4SMvVghaLhYb/HsBip88krNVISSEigOlhjmi0LziNhr6wOsgO9C1339vbGznnNAU2AM9Svk235cqKieKGkldAf7DGvTrjnjJnzyQoMu0ZTuZgUqvmlYR+f39XIE4uqCX1E/rDZpCYmKwOOmivAfYK9KF1AM7EdG4uAMLAOjmQideQXOJQkyUisqYiFRhtSFbxCxj8do0T30dmTvLhC+an0MZZVBHX09tBTG4qFigZEJEChjTIEwtRik81Qa7uOQU0IrYAe7FRjqYw6SlYjgAyN1GmHsFIGPfVnxzFuFITKEkfYK+oWZ5qKlIkcZ7UE92oXBmeIgIxtAO5UtSHqo9uiLW+sme5ejSIRASeAFR4LYy8MMzL1aq3EYWzJF28BgMEzGYpBkrMKelgl+P6uTcVY8NjLYyYPwMTCcufSaouH6al9xNJcjC82vDb9uVZKbrWIumNO+waVsu1TCC+Wxcg6xaSpsZSYM2wLO9/U8qZWH+wztQnsfAxV/E3MIKZVf1FsmJVV8mamhEmxZ0X7sSsABsGv1tZJGejmptU7FBUDYzPAXQBwFEEl+9+stFEroJEci2ELwIMmZuWoSTE9DYYcWVCjlJrZWMpeBhlAEqBiulPE84S3ixU5gSTwGGOdyEVNJXxA8nPevshwABHktBS1YoQ+QAAAABJRU5ErkJggg=='; // Set source path
                setInterval(draw,10);
            }
            var rotation = 0;
            function draw(){
                var ctx = document.getElementById('myCanvas').getContext('2d');
                ctx.globalCompositeOperation = 'destination-over';
                ctx.save();
                ctx.clearRect(0,0,27,27);
                ctx.translate(13.5,13.5); // to get it in the origin
                rotation +=1;
                ctx.rotate(rotation*Math.PI/64); //rotate in origin
                ctx.translate(-13.5,-13.5); //put it back
                ctx.drawImage(cog,0,0);
                ctx.restore();
            }
            init();
        </script>
    
  </body>
</html>
